<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trajectory Player</title>
    <link rel="stylesheet" href="index.css">
    <script type="module">
        const experiments_base_path = "../../experiments/"

        import { DynamicFileSystem } from "./DynamicFileSystem.js";
        import { StaticFileSystem } from "./StaticFileSystem.js";
        import { Index, group_by } from "./Index.js";
        import { ShowRun } from "./ShowRun.js";

        window.group_by = group_by // make available in the developer console
        const fs = new StaticFileSystem(experiments_base_path)
        const idx = new Index(fs)
        window.idx = idx
        const idx_promise = idx.refresh()

        import { Explorer } from "./Explorer.js";
        const explorer = new Explorer(experiments_base_path, idx, {"verbose": true})
        const explorerContainer = document.getElementById('explorer-container');
        explorerContainer.appendChild(explorer.getContainer());

        import { Zoo } from "./Zoo.js";
        const zoo = new Zoo(experiments_base_path, idx, {"verbose": true})
        const zooContainer = document.getElementById('zoo-container');
        zooContainer.appendChild(zoo.getContainer());


        idx_promise.then(() => {
            const runs_with_ui = idx.run_list.filter(run => run.ui_jsm)
            const runs_with_steps = runs_with_ui.filter(run => run.steps && Object.keys(run.steps).length > 0)
            const run = runs_with_steps[0]
            const latest_run_container = document.getElementById('latest-run-container')
            const show_rung = new ShowRun(latest_run_container, run)
        })

    </script>
</head>
<body>
    <h1>Latest Run</h1>
    <div id="latest-run-container">
        Loading...
    </div>
    <h1>Run Explorer</h1>
    <div id="explorer-container"></div>
    <h1>Learning Curves</h1>
    <div class="zoo-container-container">
        <div id="zoo-container" class="zoo-container-container-element"></div>
    </div>
</body>
</html>

